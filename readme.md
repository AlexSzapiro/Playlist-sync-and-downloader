# 🎵 FUVI Playlist Automator & Track Sync Tools

This project automates music playlist synchronization and downloading with two core scripts:

1. `list_missing_tracks.py` — Analyze which Spotify tracks are missing from your local collection.
2. `fuvi_download.py` — Log into [music.fuvi-clan.com](https://music.fuvi-clan.com), search for tracks, and auto-add matches to a specific playlist.

---

## 📦 Project Structure

```text
├── fuvi_download.py # Automates track adding to FUVI playlist
├── list_missing_tracks.py # Compares Spotify playlist with local files
├── .env # Stores credentials securely
└──logs
  ├── missing_tracks.txt # Generated by list_missing_tracks.py
  ├── added_tracks.txt # Tracks successfully added to FUVI
  ├── not_found_tracks.txt # Tracks not matched in FUVI
  ├── matched_tracks.txt # Local tracks matched with Spotify
  ├── unmatched_local.txt # Local files not used or matched
```

---

## 🧰 Requirements

- Python 3.8+
- Google Chrome
- ChromeDriver installed and in system path

```bash
pip install -r requirements.txt
```

---

## 🔐 .env Setup

Create a `.env` file in the root directory and include:

# For FUVI login
FUVI_USERNAME=your_fuvi_email
FUVI_PASSWORD=your_fuvi_password

# For Spotify sync
SPOTIPY_CLIENT_ID=your_spotify_client_id
SPOTIPY_CLIENT_SECRET=your_spotify_client_secret

You can obtain them following the instructions here https://spotipy.readthedocs.io/en/latest/ .

---

## 🔍 Script 1: list_missing_tracks.py
### ✅ Purpose

Detect which tracks from a Spotify playlist are missing from your local DJ library.

### ▶️ Run

Remember to make the playlist public before running.

```bash
python list_missing_tracks.py "https://open.spotify.com/playlist/..."
  --folder_path "/path/to/your/music/folder"
```

### 📤 Outputs
matched_tracks.txt: Tracks found in both Spotify and your local library

missing_tracks.txt: Tracks in Spotify but not in local files (used by fuvi_download.py)

unmatched_local.txt: Local files that didn’t match anything from Spotify

---

## 🎧 Script 2: fuvi_download.py
### ✅ Purpose
Use Selenium to:

Log into music.fuvi-clan.com

Verify or create the playlist

Search and fuzzy-match tracks

Add best match to playlist

### ▶️ Run

```bash
python fuvi_download.py
```

Make sure missing_tracks.txt exists (output from list_missing_tracks.py).

### 📤 Outputs
added_tracks.txt: Tracks successfully added to the FUVI playlist

not_found_tracks.txt: Tracks not found or not confidently matched

## 🧪 Matching Logic

Both scripts use advanced, DJ-proof fuzzy matching to ensure accurate track identification and avoid mismatches across remixes and edits.

### **Key Features:**
- **Robust normalization:**  
  Removes neutral suffixes (like "Original Mix", "Extended Mix", "2023") and country tags, standardizes punctuation, and ignores case.

- **Artist permutations:**  
  All possible artist name orders are tested for each track (e.g., "A, B, C" matches "C, B, A").

- **Remixer handling:**  
  For tracks labeled as remixes, remixers named in the title are also treated as possible artists, ensuring matches across different tagging styles.

- **Fuzzy similarity:**  
  Uses a SequenceMatcher score (difflib) on normalized "Artist(s) - Title" strings.  
  - Only matches with a score above 85% (default) are accepted.

### **How It Works**
- For each track, generate all normalized permutations (artist/title/remixer).
- For each candidate, normalize and compare against all variants.
- If a remix type mismatch is detected, the candidate is skipped regardless of fuzzy score.
- Only the highest-scoring, valid candidate above the similarity threshold is considered a match.
- It may have some errors, such as identifying the acapella version of a song as the original. 

---

